import{a as N}from"./chunk-RKIOQQF2.js";import{b}from"./chunk-BAAVVIJZ.js";import{b as P,c as m,d as E,e as U,g as F,h as I,i as M,j as k,k as A,l as D}from"./chunk-RLWKV22P.js";import{a as V}from"./chunk-2MUWOENO.js";import{f as C}from"./chunk-TGBJPAE4.js";import{Bb as a,Ia as w,Jb as f,Oa as u,U as v,Za as s,a as _,hb as r,hc as y,ib as o,jb as c,kc as x,ob as g,pb as h,ya as n,yc as S,zc as T}from"./chunk-CT336D6Y.js";var z=t=>({"is__invalid-input":t}),O=t=>({"peer-focus:text-destructive!":t});function B(t,d){t&1&&(r(0,"div"),a(1,"Campo obligatorio"),o())}function L(t,d){t&1&&(r(0,"div"),a(1,"Debe tener al menos 3 caracteres"),o())}function q(t,d){t&1&&(r(0,"div"),a(1,"No puede exceder 50 caracteres"),o())}function G(t,d){if(t&1&&(r(0,"div",21),u(1,B,2,0,"div",22)(2,L,2,0,"div",22)(3,q,2,0,"div",22),o()),t&2){let i=h();n(),s("ngIf",i.f.password.errors.required),n(),s("ngIf",i.f.password.errors.minlength),n(),s("ngIf",i.f.password.errors.maxlength)}}function R(t,d){t&1&&(r(0,"div"),a(1,"Campo obligatorio"),o())}function j(t,d){t&1&&(r(0,"div"),a(1,"Debe tener al menos 3 caracteres"),o())}function H(t,d){t&1&&(r(0,"div"),a(1,"No puede exceder 50 caracteres"),o())}function J(t,d){t&1&&(r(0,"div"),a(1,"Las contrase\xF1as no coinciden."),o())}function K(t,d){if(t&1&&(r(0,"div",21),u(1,R,2,0,"div",22)(2,j,2,0,"div",22)(3,H,2,0,"div",22)(4,J,2,0,"div",22),o()),t&2){let i=h();n(),s("ngIf",i.f.password2.errors.required),n(),s("ngIf",i.f.password2.errors.minlength),n(),s("ngIf",i.f.password2.errors.maxlength),n(),s("ngIf",i.f.password2.errors.passwordMismatch)}}var ne=(()=>{class t{constructor(){this._loginAccessService=v(b),this._formBuilder=v(k),this._router=v(C),this.userData={},this.submitted=!1,this.confirmPasswordTextType=!1,this.alertType=""}showAlert(i){this.alertType="",setTimeout(()=>{this.alertType=i},0)}onClick(){console.log("Button clicked")}ngOnInit(){this.userData=this._loginAccessService.getCurrentSession("currentUser"),this.form=this._formBuilder.group({password:["",[m.required,m.maxLength(50),m.minLength(3)]],password2:["",[m.required,m.maxLength(50),m.minLength(3)]]},{validators:this.passwordMatchValidator.bind(this)})}get f(){return this.form.controls}toggleVisibility(i){this[i]=!this[i]}passwordMatchValidator(i){let p=i.get("password")?.value,e=i.get("password2");if(!e)return;let l=_({},e.errors);p!==e.value?(l.passwordMismatch=!0,e.setErrors(l)):("passwordMismatch"in l&&delete l.passwordMismatch,e.setErrors(Object.keys(l).length?l:null))}onSubmit(){if(this.submitted=!0,this.form.invalid)return;let i=this.userData.otherParams.username,{password2:p}=this.form.value;this._loginAccessService.UpdatePassword(i,p).subscribe({next:()=>{this.showAlert("success"),setTimeout(()=>{this._loginAccessService.deleteCurrentSession("currentUser"),this._router.navigate(["/auth/sign-in"])},2e3)},error:e=>{console.log("Error recibido:",e),e.error&&console.error("Detalles del error:",e.error),this.showAlert("error")}})}static{this.\u0275fac=function(p){return new(p||t)}}static{this.\u0275cmp=w({type:t,selectors:[["app-update-password"]],decls:38,vars:23,consts:[[1,"my-10","mx-auto","w-full","space-y-6","md:w-1/2",3,"ngSubmit","formGroup"],[1,"text-center"],[1,"text-foreground","mb-1","text-3xl","font-semibold"],[1,"text-primary"],[1,"space-y-3","text-left"],[1,"relative"],["type","text","id","user","placeholder","","disabled","",1,"peer","block",3,"value"],["for","user",1,"bg-background","text-muted-foreground","peer-focus:text-primary","absolute","top-2","z-10","origin-[0]","-translate-y-4","scale-95","transform","px-2","text-sm","duration-300","peer-placeholder-shown:top-1/2","peer-placeholder-shown:-translate-y-1/2","peer-placeholder-shown:scale-100","peer-focus:top-2","peer-focus:-translate-y-4","peer-focus:scale-95","peer-focus:px-2","ltr:left-1","rtl:right-1"],[1,"form__group"],["id","password","placeholder"," ","formControlName","password",1,"peer","block",3,"type","ngClass"],["for","password",1,"bg-background","text-muted-foreground","peer-focus:text-primary","absolute","top-2","z-10","origin-[0]","-translate-y-4","scale-95","transform","px-2","text-sm","duration-300","peer-placeholder-shown:top-1/2","peer-placeholder-shown:-translate-y-1/2","peer-placeholder-shown:scale-100","peer-focus:top-2","peer-focus:-translate-y-4","peer-focus:scale-95","peer-focus:px-2","ltr:left-1","rtl:right-1",3,"ngClass"],[1,"text-muted-foreground","absolute","top-2","cursor-pointer","ltr:right-3","rtl:left-3",3,"click"],[3,"src","svgClass"],["class","is__invalid-error",4,"ngIf"],["id","password2","placeholder"," ","formControlName","password2",1,"peer","block",3,"type","ngClass"],["for","password2",1,"bg-background","text-muted-foreground","peer-focus:text-primary","absolute","top-2","z-10","origin-[0]","-translate-y-4","scale-95","transform","px-2","text-sm","duration-300","peer-placeholder-shown:top-1/2","peer-placeholder-shown:-translate-y-1/2","peer-placeholder-shown:scale-100","peer-focus:top-2","peer-focus:-translate-y-4","peer-focus:scale-95","peer-focus:px-2","ltr:left-1","rtl:right-1",3,"ngClass"],[1,"grid","grid-cols-4","gap-2"],[1,"rounded-xs","bg-muted","h-1"],[1,"text-muted-foreground","text-xs"],["full","","impact","bold","tone","primary","shape","rounded","size","medium"],[3,"type"],[1,"is__invalid-error"],[4,"ngIf"]],template:function(p,e){p&1&&(r(0,"form",0),g("ngSubmit",function(){return e.onSubmit()}),r(1,"div",1)(2,"h2",2),a(3,"Nueva Contrase\xF1a "),r(4,"span",3),a(5,"!"),o()()(),r(6,"div",4)(7,"div",5),c(8,"input",6),r(9,"label",7),a(10," Usuario "),o()(),r(11,"div",8)(12,"div",5),c(13,"input",9),r(14,"label",10),a(15," Contrase\xF1a "),o(),r(16,"span",11),g("click",function(){return e.toggleVisibility("passwordTextType")}),c(17,"svg-icon",12),o()(),u(18,G,4,3,"div",13),o(),r(19,"div",8)(20,"div",5),c(21,"input",14),r(22,"label",15),a(23," Confirmar Contrase\xF1a "),o(),r(24,"span",11),g("click",function(){return e.toggleVisibility("confirmPasswordTextType")}),c(25,"svg-icon",12),o()(),u(26,K,5,4,"div",13),o(),r(27,"div",16),c(28,"div",17)(29,"div",17)(30,"div",17)(31,"div",17),o(),r(32,"span",18),a(33," Recomendacion: usar 8 o m\xE1s caracteres con una combinaci\xF3n de letras, n\xFAmeros y s\xEDmbolos. "),o()(),r(34,"div")(35,"app-button",19),a(36,"Actualizar"),o()()(),c(37,"app-alerts",20)),p&2&&(s("formGroup",e.form),n(8),s("value",e.userData.otherParams.username),n(5),s("type",e.passwordTextType?"text":"password")("ngClass",f(15,z,e.submitted&&e.f.password.errors)),n(),s("ngClass",f(17,O,e.submitted&&e.f.password.errors)),n(3),s("src",e.passwordTextType?"assets/icons/heroicons/outline/eye.svg":"assets/icons/heroicons/outline/eye-off.svg")("svgClass","h-5 w-5"),n(),s("ngIf",e.submitted&&e.f.password.errors),n(3),s("type",e.confirmPasswordTextType?"text":"password")("ngClass",f(19,z,e.submitted&&e.f.password2.errors)),n(),s("ngClass",f(21,O,e.submitted&&e.f.password2.errors)),n(3),s("src",e.confirmPasswordTextType?"assets/icons/heroicons/outline/eye.svg":"assets/icons/heroicons/outline/eye-off.svg")("svgClass","h-5 w-5"),n(),s("ngIf",e.submitted&&e.f.password2.errors),n(11),s("type",e.alertType))},dependencies:[A,F,P,E,U,T,S,x,V,D,I,M,y,N],styles:[`.is__invalid-input[_ngcontent-%COMP%]{border-style:var(--tw-border-style);border-width:1px;border-color:var(--color-destructive)}.is__invalid-input[_ngcontent-%COMP%]:focus{border-color:var(--color-destructive);--tw-ring-color:transparent;outline-style:none}@media (forced-colors:active){.is__invalid-input[_ngcontent-%COMP%]:focus{outline-offset:2px;outline:2px solid #0000}}.is__invalid-error[_ngcontent-%COMP%]{padding-inline:calc(var(--spacing)*1);padding-top:calc(var(--spacing)*1);font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height));color:var(--color-destructive)}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}

`]})}}return t})();export{ne as UpdatePasswordComponent};
